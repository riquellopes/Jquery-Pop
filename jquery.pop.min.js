/**
 * Author: Henrique Lopes
 * Email:  <riquellopes@gmail.com, riquellopes@yahoo.com.br> 
 *
 * Version: 0.1
 * Date:	2010-08-25
 * 
 * Generates the pop with it's defaults configurations.
 * $("#element").pop();
 * 
 * Or customer.
 * $("#element").pop({
 *		position:{
 *			align:"center",
 *			valign:"middle"
 *		}
 *		param:{
 *			width:600,
 *			height:200
 *			name_pop:"my_name_favorite"
 *		}
 *   });
 */
(function($){$.fn.pop=function(options){var setting=$.extend({afterclose:null,nowopen:null,beforeopen:null,print:false,msg:"Disable your anti-spam!",param:{name_pop:"pop",width:window.screen.availWidth,height:window.screen.availHeight,resizable:false,toolbar:false,status:false,system:false,menubar:false,scrollbars:true,modal:true}},options),position=function(){var screen_height=window.screen.availHeight,screen_width=window.screen.availWidth;if(setting.param.width){var width=setting.param.width,left=parseInt(screen_width/2)-parseInt(width/2);}else
{var width=(screen_width-10),left=0;}if(setting.param.height){var height=setting.param.height,top=parseInt(screen_height/2)-parseInt(height/2);}else
{var height=(screen_height-35),top=0;}return{left:left,top:top};},to_string=function(){var query=new Array(),param=setting.param;for(k in param){var p=param[k];if(typeof p'Boolean'){var value=p?"yes":"no";query.push(k+"="+value);}else
{query.push(k"="+p);}}return query.join(",");},to_string=to_string();$(this).live("click",function(){if(typeof setting.beforeopen=='function'){var func=setting.beforeopen.call(this);if(func==false)return func;}var url=$(this).attr('nodeName')=='A'?this.href:$(this).attr('url');position=position(),pop=window.open(url,setting.param.name_pop,to_string);pop.focus();if(!pop){alert(setting.msg);}else if(typeof setting.afterclose=='function'){var close=window.setInterval(function(){if(pop==null||pop.closed){setting.afterclose.call(this,pop);window.clearInterval(close);}},1000);}else if(typeof setting.nowopen=='function'){setting.nowopen.call(this,pop);}else if(setting.print){setTimeout('opens.print()',1000);}return false;});};})(jQuery);
